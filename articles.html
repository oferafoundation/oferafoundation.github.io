<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ofera Foundation</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400" rel="stylesheet">
  <link rel="stylesheet" href="oferafoundation.github.io/theme.css">
</head>

<body>

<nav style="background-color: white; padding: 10px; position: fixed; width: 100%; z-index: 999">
  <div class="header">
    <span><a href="https://oferafoundation.github.io">HOME</a></span>
    <span><a href="https://oferafoundation.github.io/about">ABOUT</a></span>
    <span><a href="https://oferafoundation.github.io/articles">ARTICLES</a></span>
    <span><a href="https://oferafoundation.github.io/contact" >CONTACT</a></span>
    <span><a href="https://oferafoundation.github.io/donate">DONATE</a></span>
    <!--<span><input type="text" placeholder="Search..."></span>-->
  </div>
</nav>

<!-- Landing Page Image and words over it -->
 <div class="image-container" style="">
<img src="https://hellenicnews.com/wp-content/uploads/2017/07/nature-blurry-background-32.jpg" class="featured-image dark">
    <div class="centered">
<h1 style="line-height: 1.5; text-align: center;">ARTICLES</h1>
    </div>
  </div>

<div class="container">
	<div class="row" id="load-articles">
		
		<div class="col-sm-4">
		<div class="thumbnail">
		    <a href="article.html?q=article-risingsea" class="unstyledlink">
            		<img class="img-item" src="https://images.adsttc.com/media/images/5237/4f03/e8e4/4eef/7900/011d/medium_jpg/1.jpg?1379356416">
                	<div class="image-description">
                	  <h3>Is the sea level rising?</h3>
                	  <p>Yes, it is.</p>
                	</div>
		    </a>
            	</div>
		</div>
		<div class="col-sm-4">
		<div class="thumbnail">
		    <a href="article.html?q=article-fossilfuels" class="unstyledlink">
            		<img class="img-item" src="https://images.adsttc.com/media/images/5237/4f03/e8e4/4eef/7900/011d/medium_jpg/1.jpg?1379356416">
                	<div class="image-description">
                	  <h3>Is the sea level rising?</h3>
                	  <p>Yes, it is.</p>
                	</div>
		    </a>
            	</div>
		</div>
		<div class="col-sm-4">
		<div class="thumbnail">
		    <a href="article.html?q=article-bees" class="unstyledlink">
            		<img class="img-item" src="https://images.adsttc.com/media/images/5237/4f03/e8e4/4eef/7900/011d/medium_jpg/1.jpg?1379356416">
                	<div class="image-description">
                	  <h3>Is the sea level rising?</h3>
                	  <p>Yes, it is.</p>
                	</div>
		    </a>
            	</div>
		</div>
		<div class="col-sm-4">
		<div class="thumbnail">
		    <a href="article.html?q=article-acid" class="unstyledlink">
            		<img class="img-item" src="https://images.adsttc.com/media/images/5237/4f03/e8e4/4eef/7900/011d/medium_jpg/1.jpg?1379356416">
                	<div class="image-description">
                	  <h3>Is the sea level rising?</h3>
                	  <p>Yes, it is.</p>
                	</div>
		    </a>
            	</div>
		</div>
		<!--<div class="col-sm-4">
		<div class="thumbnail">
		    <a href="article.html?q=article-risingsea" class="unstyledlink">
            		<img class="img-item" src="https://images.adsttc.com/media/images/5237/4f03/e8e4/4eef/7900/011d/medium_jpg/1.jpg?1379356416">
                	<div class="image-description">
                	  <h3>Is the sea level rising?</h3>
                	  <p>Yes, it is.</p>
                	</div>
		    </a>
            	</div>-->
		</div>
	</div>
</div>
<!-- Footer -->
<div class="color-container" style="background-color: rgb(20, 20, 20);">
    <div class="row">
    	<div class="col-sm-3">
		<span><a href="https://oferafoundation.github.io/" style="color: white">Home</a></span>
	    </div>
	    <div class="col-sm-3">
		<span><a href="https://oferafoundation.github.io/about" style="color: white">About</a></span>
        </div>
        <div class="col-sm-3">
        	<span><a href="https://oferafoundation.github.io/contact" style="color: white">Contact</a></span>
	    </div>
	    <div class="col-sm-3">
            <span><a href="https://oferafoundation.github.io/donate" style="color: white">Donate</a></span>
	    </div>
        </div>
    </div>
	
	
<script>
	
      (function loadContent(){
        let xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                let listData = JSON.parse(this.responseText);
                loadSuccess(listData);
            } else if (this.readyState == 4 && this.status == 404){
		        loadFailure();
	    }
        };
        xmlhttp.open("GET", "https://oferafoundation.github.io/articles/articleslist.json", true);
        xmlhttp.send();
      })();
	
	
	function loadSuccess(listData){
        for(let a in listData.articles){
            let xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    let articleData = JSON.parse(this.responseText);
                    addArticle(listData.articles[a], articleData.image, articleData.title, articleData.caption);
                } else if (this.readyState == 4 && this.status == 404){
		            //do nothing: the user must never know...
                    //if our database/list of articles goes down though, this might be a problem
	            }
            };
            xmlhttp.open("GET", "https://oferafoundation.github.io/articles/"+listData.articles[a]+".json", true);
            
            //IMPORTANT: DO NOT SHORTEN THE ABOVE URL. 
            //If the article list has a malicous url in it, we DON'T want that to be forwarded to here.
            
            xmlhttp.send();
        }
    }
    
    function addArticle(link,image,title,caption){
        let newel = document.createElement("div");
        newel.classList.add("col-sm-4");
        newel.innerHTML = "<div class=\"thumbnail\"><a href=\""+link+"\" class=\"unstyledlink\"><img class=\"img-item\" src=\""+image+"\"><div class=\"image-description\"><h3>"+title+"</h3><p>"+caption+"</p></div></a></div>";
        document.getElementById("load-articles").appendChild(newel);
    }
    function loadFailure(){
        document.getElementById("load-articles").innerHTML = "<h1>Oops...I think I lost my list of articles. So, how was your day?</h1>";
    }
	
	
	
	
	
	
</script>

</body>
</html>
